<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>맛집 문장 검색</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>맛집 문장 검색</h1>
    <form id="searchForm" method="post" action="/search/" onsubmit="submitForm(event)">
        <input type="text" id="searchInput" name="query" placeholder="검색어를 입력하세요">
        <input type="text" id="regionInput" name="region" placeholder="지역을 입력하세요">
        <button type="submit">검색</button>
    </form>

    <div id="results">
        {% if search_results %}
            <h2>검색 결과</h2>
            <ul>
                {% for result in search_results %}
                    <li>
                        <h3>{{ result.title }}</h3>
                        <p>{{ result.description }}</p>
                        <a href="{{ result.link }}" target="_blank">더보기</a>
                    </li>
                {% endfor %}
            </ul>

        {% endif %}
    </div>

    <script>
        function submitForm(event) {
            event.preventDefault();  // 페이지 새로고침 방지

            const form = document.getElementById('searchForm');
            const formData = new FormData(form);

            fetch('/search/', {
                method: 'POST',
                body: formData,
            })
            .then(response => response.text())  // 텍스트 응답 받기 (HTML)
            .then(html => {
                document.body.innerHTML = html;  // 페이지 전체를 새 HTML로 교체
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
